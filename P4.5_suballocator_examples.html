<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
    <meta content="HTML Tidy for Windows (vers 1st November 2003), see www.w3.org" name="generator" />
    <title>Boost C++ Libraries</title>
    <link type="image/ico" href="http://www.boost.org/favicon.ico" rel="icon" />
    <link href="http://www.boost.org/style-v2/section-welcome.css" type="text/css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="files/code.css" />
    <!--[if IE 7]> <style type="text/css"> body { behavior: url(http://www.boost.org/style-v2/csshover3.htc); } </style> <![endif]-->
    <meta content="mpr2HgFpodnbF_8fv4qXd9roIClVwtX3C-Kd3F6r61w" name="google-site-verification" />
  </head>
  <!-- Note: Editing website content is documented at:http://www.boost.org/development/website_updating.html-->
  <!--*******************************************************************************************************-->
  <!--                                           B O D Y                                                     -->
  <!--*******************************************************************************************************--> <body>
    <div id="heading">
      <div class="heading-inner">
        <div class="heading-placard"></div>
        <h1 class="heading-title"> <a href="http://www.boost.org/"> <img class="heading-logo" alt="Boost C++ Libraries"
              src="http://www.boost.org//gfx/space.png" /> <span class="heading-boost">Boost</span> <span class="heading-cpplibraries">C++
              Libraries</span>
            <!-- Removing the next line, deletes the Preliminary text in the decoration od the top odf the page --> <img
              style="width: 300px; height: 80px;" alt="Preliminary" src="img/preliminary.gif" /> </a></h1>
        <p class="heading-quote"> <q>...one of the most highly regarded and expertly designed C++ library projects in
            the world.</q> <span class="heading-attribution">— <a class="external" href="http://www.gotw.ca/">Herb
              Sutter</a> and <a class="external" href="http://en.wikipedia.org/wiki/Andrei_Alexandrescu">Andrei
              Alexandrescu</a>, <a class="external" href="http://safari.awprofessional.com/?XmlId=0321113586">C++
              Coding Standards</a></span></p>
      </div>
      <!--  div heading-inner--> </div>
    <!-- - div  heading -->
    <div class="clear"></div>
    <!--*******************************************************************************************************-->
    <!--                       T E X T   O F      T H E     P A G E                                            -->
    <!--*******************************************************************************************************-->
    <div class="cuerpo_central">
      <div class="cuerpo_texto"> <br />
        <br />
        <span style="font-size: 32pt;"> <span style="font-weight: bold; color: black;"> <a href="index.html">The [
              Counter Tree + Suballocator ] Library</a> </span></span><br />
        <div>
          <div class="author">
            <h3 class="author"><br />
              <span class="firstname"></span></h3>
            <h3 style="font-style: italic;" class="author"><span class="firstname">Francisco Jose Tapia</span>  
              Copyright © 2010-2012 Francisco Jose Tapia</h3>
          </div>
        </div>
        <div>
          <div class="legalnotice">
            <p><span style="font-style: italic;">Distributed under the Boost Software License, Version 1.0. (See
                accompanying file LICENSE_1_0.txt or copy at </span><a style="font-style: italic;" href="file:///LICENSE_1_0.txt"
                target="_top"> http://www.boost.org/LICENSE_1_0.txt </a><span style="font-style: italic;">)</span> </p>
          </div>
        </div>
        <br />
        <br />
    <!--*******************************************************************************************************-->
    <!--                                     M E N U                                                           -->
    <!--*******************************************************************************************************-->        
        <div class="caja_menu"> <span style="font-weight: bold;"><br />
          </span><span style="font-size: 16pt;font-weight: bold; color: black;">Table of Contents</span> <br />
          <br />
          <div style="margin-left: 40px;"><a href="P4.0_suballocator.html">4.- Suballocators</a><br />
          </div>
          <div style="margin-left: 80px;">
			<a href="P4.0_suballocator.html#problems">4.1.- Problems with allocators in Windows and Linux</a><br />
            <a href="P4.0_suballocator.html#description"> 4.2.- Description of the Suballocators </a><br />
            <a href="P4.3_suballocator_functions.html">4.3.- Functions of the Suballocators </a><br />
            <a href="P4.4_suballocator_cnc_functions.html">4.4.- Functions of the Suballocators_cnc </a><br />
            <a href="P4.5_suballocator_examples.html">4.5.- Examples </a><br />
            <a href="P4.6_suballocator_benchmarks.html">4.6.- Benchmarks </a><br />
            <div style="margin-left: 40px;">
			  <a href="P4.6_suballocator_benchmarks.html#gcc">4.6.- Benchmark GCC 4.7</a><br />
              <a href="P4.6_suballocator_benchmarks.html#vc++">4.6.- Benchmark VC++ 12CTP</a><br />
              <a href="P4.6_suballocator_benchmarks.html#clang">4.6.- Benchmark CLANG 3.0</a></div>
            <br />
            <br />
          </div>
        </div>
        <!--        Fin div caja_menu  --> 
        <br />
        <br />
        <!--*******************************************************************************************************-->
        <!--                                           E X A M P L E S                                             -->
        <!--*******************************************************************************************************-->
        <p><a name="examples"></a> <span style="font-size: 18pt;font-weight: bold; color: black;">4.5.- Examples</span></p>
        <p> </p>
        <div class="caja_codigo"> <br />
          <br />
          <pre><code><span style="font: 10pt Monospace;"><span class="style15">///----------------------------------------------------------------------------
</span><span class="style2">// FILE : example_suballocator_00.cpp
//
// DESCRIPTION : Test program of the class suballocator
//
// MODIFICATIONS (AUTHOR,DATE,REASON) :
//  Copyright (c) 2010 2012 Francisco José Tapia (fjtapia@gmail.com )
//
// Distributed under the Boost Software License, Version 1.0. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//
// NOTES : This program allocate 100.000.000 double elements and
//   deallocate measuring the times with the function clock()
//-----------------------------------------------------------------------------
</span><span class="style9">#include &lt;boost/countertree/suballocator.hpp&gt;
#include &lt;iostream&gt;
#include &lt;time.h&gt;

#define NELEM 100000000


</span><span class="style5">int </span><span class="style11">main </span><span class="style10">( </span><span class="style5">void</span><span
class="style10">)
{   </span><span class="style2">//------------------------------ begin ----------------------------------
    </span><span class="style5">double </span><span class="style11">duracion </span><span class="style10">;
    </span><span class="style11">clock_t start</span><span class="style10">, </span><span class="style11">finish </span><span
class="style10">;
    </span><span class="style5">double </span><span class="style10">** </span><span class="style11">K </span><span class="style10">= </span><span
class="style5">new double</span><span class="style10">* [</span><span class="style11">NELEM</span><span class="style10">];

    </span><span class="style2">//-------- Creating the suballocator --------------------------
    </span><span class="style11">countertree</span><span class="style10">::</span><span class="style11">suballocator</span><span
class="style10">&lt; </span><span class="style16">std</span><span class="style10">::</span><span class="style16">allocator</span><span
class="style10">&lt;</span><span class="style5">double</span><span class="style10">&gt; &gt;</span><span class="style11">A </span><span
class="style10">;

    </span><span class="style2">//--------------------------------------------------------
    //         Allocate of the elements
    //-------------------------------------------------------
    </span><span class="style16">std</span><span class="style10">::</span><span class="style16">cout</span><span class="style10">&lt;&lt;</span><span
class="style6">"Begin  ----------------------&gt;\n"</span><span class="style10">;
    </span><span class="style11">start </span><span class="style10">= </span><span class="style11">clock</span><span class="style10">();
    </span><span class="style5">for </span><span class="style10">( </span><span class="style5">uint32_t </span><span class="style11">i </span><span
class="style10">=</span><span class="style4">0  </span><span class="style10">; </span><span class="style11">i </span><span
class="style10">&lt; </span><span class="style11">NELEM </span><span class="style10">; ++</span><span class="style11">i</span><span
class="style10">)
        </span><span class="style11">K</span><span class="style10">[</span><span class="style11">i</span><span class="style10">] = </span><span
class="style11">A</span><span class="style10">.</span><span class="style11">allocate</span><span class="style10">(</span><span
class="style4">1</span><span class="style10">);
    </span><span class="style11">finish </span><span class="style10">= </span><span class="style11">clock</span><span class="style10">() ;

    </span><span class="style11">duracion </span><span class="style10">= (</span><span class="style5">double</span><span
class="style10">)(</span><span class="style11">finish </span><span class="style10">- </span><span class="style11">start</span><span
class="style10">) / </span><span class="style11">CLOCKS_PER_SEC</span><span class="style10">;
    </span><span class="style16">std</span><span class="style10">::</span><span class="style16">cout</span><span class="style10">&lt;&lt;</span><span
class="style6">"Time Alloc  :"</span><span class="style10">&lt;&lt;</span><span class="style11">duracion</span><span class="style10">&lt;&lt;</span><span
class="style6">" seconds\n"</span><span class="style10">;

    </span><span class="style2">//--------------------------------------------------------
    //         Deallocate of the elements
    //-------------------------------------------------------
    </span><span class="style16">std</span><span class="style10">::</span><span class="style16">cout</span><span class="style10">&lt;&lt;</span><span
class="style6">"Full ----------------------&gt;\n"</span><span class="style10">;
    </span><span class="style11">start </span><span class="style10">= </span><span class="style11">clock</span><span class="style10">();
    </span><span class="style5">for </span><span class="style10">( </span><span class="style5">uint32_t </span><span class="style11">i </span><span
class="style10">=</span><span class="style4">0  </span><span class="style10">; </span><span class="style11">i </span><span
class="style10">&lt; </span><span class="style11">NELEM </span><span class="style10">; ++</span><span class="style11">i</span><span
class="style10">)
        </span><span class="style11">A</span><span class="style10">.</span><span class="style11">deallocate</span><span
class="style10">(</span><span class="style11">K</span><span class="style10">[</span><span class="style11">i</span><span
class="style10">]);
    </span><span class="style11">finish </span><span class="style10">= </span><span class="style11">clock</span><span class="style10">() ;

    </span><span class="style11">duracion </span><span class="style10">= (</span><span class="style5">double</span><span
class="style10">)(</span><span class="style11">finish </span><span class="style10">- </span><span class="style11">start</span><span
class="style10">) / </span><span class="style11">CLOCKS_PER_SEC</span><span class="style10">;
    </span><span class="style16">std</span><span class="style10">::</span><span class="style16">cout</span><span class="style10">&lt;&lt;</span><span
class="style6">"Time Dealloc  :"</span><span class="style10">&lt;&lt;</span><span class="style11">duracion</span><span class="style10">&lt;&lt;</span><span
class="style6">" seconds\n"</span><span class="style10">;

    </span><span class="style16">std</span><span class="style10">::</span><span class="style16">cout</span><span class="style10">&lt;&lt;</span><span
class="style6">"Empty ----------------------&gt;\n"</span><span class="style10">;

    </span><span class="style5">delete </span><span class="style11">K</span><span class="style10">;
}</span></span>

</code></pre> </div>
        <br />
        <br />
    <!--*******************************************************************************************************  -->
    <!--                             I C O N O S   P A R T E   I N F E R I O R                                  -->
    <!--*******************************************************************************************************  -->    
        <a title="suballocator benchmarks" href="P4.6_suballocator_benchmarks.html" style="float:right"><img alt="next page" src="img/next.png" /></a> 
        <a title="home page" href="P4.0_suballocator.html" style="float:right"><img alt="go to head of the page" src="img/up.png" /></a> 
        <a title="suballocator_cnc functions" href="P4.4_suballocator_cnc_functions.html" style="float:right"><img src="img/prev.png" alt="previous page" /></a> 
        <a title="home" href="index.html" style="float:right"><img  src="img/home.png" alt="home page" /></a>
        <br />
      </div>
    </div>
    <!--*******************************************************************************************************-->
    <!--                    T A B L A    I N F E R I O R   D E   L A    P A G I N A                            -->
    <!--*******************************************************************************************************-->
    <table width="100%" xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision">
      <tbody>
        <tr>
          <td align="left">
            <p><small>Last revised: April  16, 2012 <br />
              </small></p>
          </td>
          <td align="right"> <br />
          </td>
        </tr>
      </tbody>
    </table>
    <hr />
    <div class="box-bottom"></div>
    <!-- div cuerpo_texto -->
    <div class="clear"></div>
    <!-- div cuerpo central -->
    <!--  div body -->
    <!--*******************************************************************************************************-->
    <!--                                      F O O T E R                                                      -->
    <!--*******************************************************************************************************-->
    <div id="footer">
      <div id="footer-left">
        <div id="copyright">
          <p>Copyright Francisco Jose Tapia 2010- 2012.</p>
        </div>
        <div id="license">
          <p>Distributed under the <a class="internal" href="/LICENSE_1_0.txt">Boost Software License, Version 1.0</a>.</p>
        </div>
      </div>
      <div id="footer-right">
        <div id="banners">
          <p id="banner-xhtml"> <a class="external" href="http://validator.w3.org/check?uri=referer">XHTML 1.0</a></p>
          <p id="banner-css"> <a class="external" href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a></p>
          <p id="banner-osi"> <a class="external" href="http://www.opensource.org/docs/definition.php">OSI Certified</a></p>
        </div>
      </div>
      <div class="clear"></div>
    </div>
  </body>
</html>
